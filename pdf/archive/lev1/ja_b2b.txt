一般的なガイドライン
    VirtualBox（または、VirtualBoxが使用できない場合はUTM）の利用が必須です。
    リポジトリのルートには、signature.txtという1つのファイルのみを提出してください。
    このファイルには、仮想マシンの仮想ディスクの署名を貼り付ける必要があります。
    提出およびピア評価に関する詳細については、後述のセクションを参照してください。

必須項目
このプロジェクトでは、特定のルールに従いながら、最初のサーバーをセットアップすることを目的とします。
サーバーをセットアップするにあたり、最小限のサービスのみをインストールする必要があります。
そのため、グラフィカルインターフェースは不要とされます。
したがって、X.orgまたはそれに類似するグラフィックスサーバーをインストールすることは一切禁止されており、これに違反した場合は評価が0点となります。
    Debianを使用する場合は、AppArmorを起動時に有効化してください。

必須設定
    暗号化されたパーティション
        LVM（Logical Volume Manager）を用いて、最低2つの暗号化されたパーティションを作成する必要があります。
    SSHサービス 
        仮想マシンにポート番号「4242」で動作するSSHサービスをセットアップする必要があります。
        セキュリティ上の理由から、rootユーザーによるSSH接続は不可能でなければなりません。export SUDO_USER_NAME=$USER
        SSH接続のテスト時には、新しいアカウントをセットアップする必要があります。したがって、SSHの仕組みを十分に理解している必要があります。

    ファイアウォールの設定
        Debianの場合はUFWを使用し、Rockyの場合はFirewalldを使用してください。
        仮想マシン上ではポート4242以外の全てのポートを閉じる設定を行ってください。
        仮想マシンの起動時にファイアウォールが有効化されている必要があります。

    ホスト名
        仮想マシンのホスト名は、ログイン名の末尾に「42」を付けたものに設定する必要があります（例：wil42）。
        評価時には、ホスト名を変更する必要があります。

	    パスワードポリシー
    以下の要件を満たす強力なパスワードポリシーを設定する必要があります：
        パスワードの有効期限は30日間とします。
        パスワードの変更は、前回の変更から最低2日後に可能とします。
        パスワードの有効期限の7日前に警告メッセージを表示する必要があります。
        パスワードは10文字以上で、以下の要件を満たさなければなりません：
            英大文字と英小文字をそれぞれ1文字以上含むこと。
            数字を1つ以上含むこと。
            3文字以上連続する同一文字を含めてはなりません。
        パスワードにはユーザー名を含めることはできません。
        rootユーザー以外のパスワードについては、前回のパスワードに含まれる文字列と7文字以上異なる必要があります。
        もちろん、rootユーザーのパスワードもこのポリシーに準拠する必要があります。

    注意：
        すべてのアカウント（rootを含む）のパスワードは、設定完了後に新しいパスワードへ変更する必要があります。

    sudoの設定
    強固な設定を行うために、以下の要件を満たす必要があります：
        sudoの認証において、3回までの試行に制限する。
        認証に失敗した場合に、カスタムエラーメッセージを表示する。
        sudoコマンドのすべての入力と出力を記録し、そのログを/var/log/sudo/フォルダに保存する。
        セキュリティ上の理由からTTYモードを有効にする。
        sudoで使用可能なパスを以下に制限する：
        /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin

    監視スクリプト
    仮想マシン上に、monitoring.shという名前の簡易スクリプトをBashで作成する必要があります。
        サーバーの起動時に、このスクリプトが10分ごとにすべての端末で以下の情報を表示するように設定してください（wallコマンドを参照）。
        以下の情報を表示する必要があります：
            OSのアーキテクチャとカーネルバージョン
            物理プロセッサの数
            仮想プロセッサの数
            サーバーの利用可能メモリと、その使用率（パーセンテージ）
            サーバーのディスク容量と、その使用率（パーセンテージ）
            プロセッサの現在の使用率（パーセンテージ）
            最後に再起動した日時
            LVMの有効化状況
            アクティブな接続数
            サーバーにログイン中のユーザー数
            サーバーのIPv4アドレスとMAC（Media Access Control）アドレス
            sudoコマンドで実行されたコマンド数

    注意：
        評価時には、このスクリプトの動作を説明する必要があります。
        また、スクリプトを変更せずに中断する方法を理解している必要があります（cronコマンドを参考にしてください）。


スクリプトの出力例：
Broadcast message from root@wil (tty1) (Sun Apr 25 15:45:00 2021):
#Architecture: Linux wil 4.19.0-16-amd64 #1 SMP Debian 4.19.181-1 (2021-03-19) x86_64 GNU/Linux
#CPU physical : 1
#vCPU : 1
#Memory Usage: 74/987MB (7.50%)
#Disk Usage: 1009/2Gb (49%)
#CPU load: 6.7%
#Last boot: 2021-04-25 14:45
#LVM use: yes
#Connections TCP : 1 ESTABLISHED
#User log: 1
#Network: IP 10.0.2.15 (08:00:27:51:9b:a5)
#Sudo : 42 cmd


第5章

ボーナス部分

ボーナス課題として、以下の追加設定を行うことができます。これらをすべて達成した場合、基本的な評価に加えてポイントが与えられます。ただし、ボーナスは必須項目が完全に達成されている場合のみ評価対象となります。必須要件に不備がある場合、ボーナス部分は採点されません。
ボーナスリスト

    パーティションの正確なセットアップ
    以下のような構造を持つパーティションを正確に設定する：
        /（ルートパーティション）
        /var（ログやデータ用）
        /home（ユーザーデータ用）
        /srv（サービスデータ用）
        /tmp（一時ファイル用）

    WordPressサイトの構築
        lighttpd（軽量Webサーバー）、MariaDB（データベース）、PHP（スクリプト言語）を使用して、機能するWordPressウェブサイトをセットアップする。

    追加サービスの設定
        任意の有用なサービスを設定する。ただし、NGINXやApache2の使用は禁止されています。
        評価時に、選択したサービスの理由を説明できる必要があります。

注意：

    ボーナスの設定を行う場合は、それに必要なポートを開放することが認められています。ただし、UFW（Debian）またはFirewalld（Rocky）でのファイアウォールルールを適切に更新する必要があります。

第6章

提出およびピア評価

提出するファイルは1つのみです：

    signature.txt
    このファイルは、リポジトリのルートに配置し、仮想マシンの仮想ディスクの署名を含める必要があります。

署名を取得する手順：

    仮想マシンのデフォルトインストールフォルダを開きます（仮想マシンが保存されているフォルダです）。以下がそのパスの例です：
        Windows：%HOMEDRIVE%%HOMEPATH%\VirtualBox VMs\
        Linux：~/VirtualBox VMs/
        Mac (M1)：~/Library/Containers/com.utmapp.UTM/Data/Documents/
        MacOS：~/VirtualBox VMs/

    .vdi（またはUTMユーザーの場合は.qcow2）形式のディスクイメージから署名を取得します。この署名はSHA1形式で生成します。以下はそのコマンド例です：
        Windows：certUtil -hashfile rocky_serv.vdi sha1
        Linux：sha1sum rocky_serv.vdi
        Mac M1：shasum rocky.utm/Images/disk-0.qcow2
        MacOS：shasum rocky_serv.vdi

出力例：

6e657c4619944be17df3c31faa030c25e43e40af

注意：

    評価後、仮想マシンの署名が変更される場合があります。その場合に備え、仮想マシンを複製するか、スナップショットを使用することを推奨します。
    仮想マシン自体をリポジトリに含めることは禁止されています。評価時にはsignature.txtの署名と仮想マシンの署名が一致する必要があり、一致しない場合、評価点は0点となります。
